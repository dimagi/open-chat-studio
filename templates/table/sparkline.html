{% load static %}

<canvas id="{{ record.id }}-sparkline-chart" class="mt-2" width="100" height="30"></canvas>
<script>
    (function() {
        const canvasElement = document.getElementById('{{ record.id }}-sparkline-chart');
        if (canvasElement.chart) {
            // Destroy existing chart if it exists
            canvasElement.chart.destroy();
        }
        
        const chartContext = canvasElement.getContext('2d');
        // Store chart reference on canvas for future cleanup
        canvasElement.chart = SiteJS.sparkline.sparklineChart(chartContext, "{{ sparkline_data_url }}");
    })();
</script>
