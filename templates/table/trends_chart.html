<a href="{{ record.traces_url }}">
    <canvas id="{{ record.id }}-trends" class="m-2 max-w-20 max-h-20" data-trends="{{ trends_json }}"></canvas>
</a>
<script>
    (function() {
        const canvasElement = document.getElementById('{{ record.id }}-trends');
        if (canvasElement.chart) {
            // Destroy existing chart if it exists
            canvasElement.chart.destroy();
        }
        const chartContext = canvasElement.getContext('2d');
        const trendsData = JSON.parse(canvasElement.dataset.trends);
        // Store chart reference on canvas for future cleanup
        canvasElement.chart = SiteJS.trends.renderChart(chartContext, trendsData);
    })();
</script>
