{% load chat_tags %}
{% load json_tags %}

<!-- Inputs & Outputs tab content -->
<div class="flex flex-col gap-6">
    <!-- Input Data Section -->
    <div class="card bg-base-100 shadow-md">
        <div class="card-header border-b border-base-200 px-6 py-4">
            <h3 class="text-lg font-semibold text-base-content">User Query</h3>
        </div>
        <div class="card-body p-6">
            {% if trace.input_message %}
                <div class="space-y-4">
                    <!-- Message Content -->
                    <div class="bg-base-50 rounded-lg p-4 border border-base-200">
                        <div class="prose max-w-none text-sm">
                            {% if trace.input_message.content %}
                                {{ trace.input_message.content|render_markdown }}
                            {% else %}
                                <span class="text-base-content/50 italic">No content available</span>
                            {% endif %}
                        </div>
                        <span class="text-xs text-base-content/50">
                            <time datetime="{{ trace.input_message.created_at.isoformat }}" title="{{ trace.input_message.created_at.isoformat }}">
                              {{ trace.input_message.created_at|date:"DATETIME_FORMAT" }}
                            </time>
                        </span>
                    </div>
                </div>
            {% else %}
                <div class="text-center py-8">
                    <div class="text-base-content/40 mb-2">
                        <i class="fas fa-inbox text-2xl"></i>
                    </div>
                    <p class="text-base-content/60">No input message available for this trace</p>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Participant Data -->
    <div class="card bg-base-100 shadow-md">
        <div class="card-header border-b border-base-200 px-6 py-4">
            <h3 class="text-lg font-semibold text-base-content">Participant Data</h3>
        </div>
        <div class="card-body p-6">
            {% if trace.participant_data %}
                <pre class="text-sm overflow-x-auto whitespace-pre-wrap"><code>{{ trace.participant_data|to_json }}</code></pre>
            {% else %}
                <div class="text-center py-8">
                    <div class="text-base-content/40 mb-2">
                        <i class="fas fa-reply text-2xl"></i>
                    </div>
                    <p class="text-base-content/60">No participant data available for this trace</p>
                </div>
            {% endif %}
        </div>
    </div>


    <!-- Session Data -->
    <div class="card bg-base-100 shadow-md">
        <div class="card-header border-b border-base-200 px-6 py-4">
            <h3 class="text-lg font-semibold text-base-content">Session Data</h3>
        </div>
        <div class="card-body p-6">
            {% if trace.session_state %}
                <pre class="text-sm overflow-x-auto whitespace-pre-wrap"><code>{{ trace.session_state|to_json }}</code></pre>
            {% else %}
                <div class="text-center py-8">
                    <div class="text-base-content/40 mb-2">
                        <i class="fas fa-reply text-2xl"></i>
                    </div>
                    <p class="text-base-content/60">No session data available for this trace</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
