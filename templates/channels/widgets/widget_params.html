<div class="card bg-base-200">
  <div class="card-body">
    <h3 class="card-title text-base">
      <i class="fa-solid fa-gear me-1"></i>
      Parameters
    </h3>
    <label class="label">Chatbot ID:</label>
    <div class="join w-full">
      <input type="text"
             id="widget_chatbot_id"
             value="{{ widget.experiment.public_id }}"
             class="input input-bordered join-item flex-1 font-mono text-sm"
             readonly>
      <button class="btn btn-neutral join-item" type="button"
              onclick="SiteJS.app.copyToClipboard(this, 'widget_chatbot_id')"
              title="Copy to clipboard">
          <i class="fa-solid fa-copy"></i> Copy
      </button>
    </div>
    <label class="label">Embed Token:</label>
    <div class="join w-full">
      <input type="text"
             id="widget_token"
             value="{{ widget.token }}"
             class="input input-bordered join-item flex-1 font-mono text-sm"
             readonly>
      <button class="btn btn-neutral join-item" type="button"
              onclick="SiteJS.app.copyToClipboard(this, 'widget_token')"
              title="Copy to clipboard">
          <i class="fa-solid fa-copy"></i> Copy
      </button>
    </div>
    <h3 class="card-title text-base mt-3">
      <i class="fa-solid fa-code me-1"></i>
      Embed Code
    </h3>
    <div class="w-full">
      <p class="my-4">Use this HTML code to embed the chat window for your bot in a different site.</p>
      <button class="my-2 btn btn-sm btn-primary justify-self-center" onclick="copyEmbed(event)" title="Copy to clipboard">
        <i class="fa-regular fa-copy"></i> Copy Widget Embed Code
      </button>
      <p class="my-2 text-sm"><a href="{{ docs_base_url }}{{ docs_links.chat_widget }}" class="link" target="_blank">Learn more about embedding</a></p>
    </div>
    <div class="text-sm opacity-70 mt-2">
      <i class="fa-solid fa-info-circle me-1"></i>
      Copy this code and paste it into your website's HTML where you want the chat widget to appear.
    </div>
  </div>
</div>
<script>
  async function copyEmbed(event) {
    event.preventDefault()
    const code = `{% include "experiments/share/widget.html" with experiment=widget.experiment embed_key=widget.token %}`
    await SiteJS.app.copyTextToClipboard(event.target, code)
  }
</script>
