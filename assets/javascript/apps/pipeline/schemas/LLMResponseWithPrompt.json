{
  "$defs": {
    "ExpandableText": {
      "type": "string"
    },
    "HistoryName": {
      "type": "string"
    },
    "HistoryType": {
      "type": "string"
    },
    "LlmModel": {
      "type": "string"
    },
    "LlmProviderId": {
      "type": "integer"
    },
    "LlmTemperature": {
      "exclusiveMaximum": 2.0,
      "exclusiveMinimum": 0.0,
      "type": "number"
    },
    "MaxTokenLimit": {
      "type": "integer"
    },
    "SourceMaterialId": {
      "type": "integer"
    }
  },
  "properties": {
    "llm_provider_id": {
      "$ref": "#/$defs/LlmProviderId"
    },
    "llm_model": {
      "$ref": "#/$defs/LlmModel"
    },
    "llm_temperature": {
      "$ref": "#/$defs/LlmTemperature",
      "default": 1.0
    },
    "history_type": {
      "$ref": "#/$defs/HistoryType",
      "default": "none"
    },
    "history_name": {
      "anyOf": [
        {
          "$ref": "#/$defs/HistoryName"
        },
        {
          "type": "null"
        }
      ],
      "default": null
    },
    "max_token_limit": {
      "$ref": "#/$defs/MaxTokenLimit",
      "default": 8192,
      "validators": [
        {
          "name": "required",
          "params": {}
        },
        {
          "name": "greater_than",
          "params": {
            "value": 0
          },
          "value": 0
        },
        {
          "name": "lesser_than",
          "params": {
            "value": 10000
          },
          "value": 10000
        }
      ]
    },
    "source_material_id": {
      "anyOf": [
        {
          "$ref": "#/$defs/SourceMaterialId"
        },
        {
          "type": "null"
        }
      ],
      "default": null
    },
    "prompt": {
      "$ref": "#/$defs/ExpandableText",
      "default": "You are a helpful assistant. Answer the user's query as best you can: {input}"
    }
  },
  "required": [
    "llm_provider_id",
    "llm_model"
  ],
  "title": "LLMResponseWithPrompt",
  "type": "object"
}